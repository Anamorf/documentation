graph.user.messages

$description
Получение сообщений в чате по ID

$params#chat:id
ID чата в формате chat:id

$params#from
Время создания последнего запрашиваемого сообщения в чате (timestamp)

$params#to
Время создания первого запрашиваемого сообщения в чате (timestamp)

$params#count
Количество запрашиваемых сообщений

$additional
Следует учесть, что сообщения идут в порядке убывания их времени появления. Т.е. сначала идут новые сообщения. Поэтому параметр 
*from* должен быть больше параметра *to*.

С помощью метода можно получить информацию о сообщениях в определенном чате по ID.

ID может указываться либо в PATH, либо в виде GET-параметра.

**Пример запроса**

С указанием ID чата в PATH
{% format_code https://api.ok.ru/graph/me/messages/chat:C3ecb9d02a600?access_token=tkn18YdUJZe:CQABPOJKAKEKEKEKE&from=1498581292941&to=1498577000197&count=2 %}

С указанием ID чата в GET-параметре
{% format_code https://api.ok.ru/graph/me/messages?access_token=tkn18YdUJZe:CQABPOJKAKEKEKEKE&chat_id=chat:C3ecb9d02a600&from=1498581292941&to=1498577000197&count=2 %}

**Ответ**

{% highlight json %}
{
  "messages": [                                             /* Массив сообщений в чате */
    {
      "sender": {                                           /* Информация об отправителе сообщения (группа / пользователь) */
        "name": "Василий Васильев",                         /* Имя и фамилия пользователя */
        "user_id": "user:123456789012"                      /* ID пользователя в формате user:id */
      },
      "recipient": {                                        /* Информация о получателе сообщения (чат / диалог / пользователь)*/ 
        "chat_id": "chat:C3ecb9d02a600"                     /* ID чата в формате chat:id, либо ID пользователя в формате user:id */
      },
      "message": {                                          /* Информация о самом сообщении */
        "text": "text",                                     /* Текст сообщения */
        "seq": 98211023614189660,                           /* Возрастающий счётчик сообщения */
        "mid": "mid:C3ecb9d02a600.15cea67d78d2059"          /* ID сообщения в формате mid:id */
      },
      "timestamp": 1498581292941                            /* Время отправки сообщения (timestamp) */
    },
    {
      "sender": {
        "name": "Василий Васильев",
        "user_id": "user:123456789012"
      },
      "recipient": {
        "chat_id": "chat:C3ecb9d02a600"
      },
      "message": {
        "text": "https://ya.ru/",
        "seq": 98211018056672380,
        "attachments": [                                    /* Массив приложений сообщения */            
          {
            "type": "SHARE",                                /* Тип приложения [VIDEO, AUDIO, SHARE, IMAGE] */
            "payload": {                                    /* type-specific данные приложения. Сейчас одинаковые для всех типов приложений */
              "url": "https://ya.ru/"                       /* URL приложения к сообщению */
            }
          }
        ],
        "mid": "mid:C3ecb9d02a600.15cea668c4c2481"
      },
      "timestamp": 1498581208140
    }
  ]
}
{% endhighlight %}

**Возможные приложения в сообщении**

Сообщение может содержать ряд приложений. Сейчас у сообщения есть следующие типы:

* type=IMAGE - приложение с изображением;
* type=VIDEO - приложение с видео;
* type=AUDIO - приложение с аудиозаписью;
* type=SHARE - приложение с share ссылки.