mediatopic.post

$description
Публикация медиатопика, который может содержать множество вложенных объектов

$params#uid
Идентификатор пользователя, от имени которого необходимо создать пост. Укажите uid при вызове этого метода без ключа сессии.

$params#type
Тип медиатопика:

* USER - пост на страницу пользователя (запись увидят его друзья в своих лентах)
* USER_STATUS - установить в статус пользователя. Если указан, то требует разрешение SET_STATUS.
* USER_NOTE - добавить как заметку пользователя. Если указан, то требует разрешение PUBLISH_NOTE.
* GROUP_THEME - пост в группу
* GROUP_THEME_PROMO - промо-пост в группу
* GROUP_SUGGESTED - предложенная тема (тема на модерацию для админстрации группы. Будет опубликована в ленте только после одобрения администрациией).

$params#gid
Идентификатор группы, в которой необходимо опубликовать медиатопик. Если указан, то требует разрешение GROUP_CONTENT.
Вместе с этим параметром должен присутствовать type=GROUP_THEME или type=GROUP_THEME_PROMO.

$params#attachment
Закодированная в JSON информация о контенте медиатопика

$params#set_status
Установить медиатопик в статус. Если true, то требует разрешение SET_STATUS.

$params#devices
Платформа постинга

$params#text_link_preview
Если true, то текстовая ссылка, переданная в одном из элементов массива mediа, будет преобразована в блок-ссылку с заголовком, описанием и картинкой.

На данный момент работает только если текстовый блок в топике является единственным, последним и содержит только одну текстовую ссылку.

$params#hidden_post
Только для групповых топиков. Если true, то топик создастся как "скрытая тема".

$additional
{% include dev/methods/mediatopic.post_attachment.md %}

**Параметры для публикации групповых тем**

* **publishAtMs** - время публикации отложенной темы в миллисекундах c 1 января 1970 года. Необходимо для создания отложенной темы.
* **publishAt** - время публикации отложенной темы в формате YYYY-mm-dd hh:mi:ss (в таймзоне Europe/Moscow (GMT+3:00)). Необходимо для создания отложенной темы. Используется как альтернатива **publishAtMs**.
* **onBehalfOfGroup** - будет ли тема опубликована от имени группы или от имени пользователя, который создал тему (возможные значения - "true"/"false").
* **disableComments** - выключить ли комментарии к теме (возможные значения - "true"/"false")

{% highlight json %}
{
    "media": [
        {
            "type": "text",
            "text": "This is a text of a new topic"
        }
    ],
    "publishAt": "2015-11-05 19:09:13",
    "onBehalfOfGroup": "false",
    "disableComments": "true"
}
{% endhighlight %}

Ответ в случае успеха содержит идентификатор созданного медиатопика
